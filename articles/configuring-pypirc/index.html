<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Configuring a .pypirc File for Easier Python Packaging - truveris.github.io</title>
        <meta name="description" content="Configuring a .pypirc File for Easier Python Packaging">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Favicon -->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <!-- Stylesheets -->
        <link href='//fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Lora:400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/lib/css/style.css">

        <!-- RSS -->
        <link rel="alternate" type="application/atom+xml" href="/atom.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml">

        <!-- JS -->
        <script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
        <script type="text/javascript">stLight.options({publisher: "ur-bd6ecc7d-a28e-7a33-9fa5-a9f85b7af5fe", doNotHash: false, doNotCopy: true, hashAddressBar: false});</script>

        <!-- Social -->
        <link href="https://plus.google.com/+Truverisprescriptions" rel="publisher">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@truveris">
        <meta name="twitter:title" content="Configuring a .pypirc File for Easier Python Packaging - truveris.github.io">
        <meta name="twitter:description" content="Configuring a .pypirc File for Easier Python Packaging">
        <meta name="twitter:creator" content="@truveris">
        <meta name="twitter:domain" content="truveris.github.io">
        <meta name="twitter:image:src" content="/lib/img/stats.svg">

        <meta property="og:title" content="Configuring a .pypirc File for Easier Python Packaging - truveris.github.io">
        <meta property="og:description" content="Configuring a .pypirc File for Easier Python Packaging">
        <meta property="og:url" content="https://truveris.github.io/">
        <meta property="og:site_name" content="truveris.github.io">
        <meta property="og:type" content="blog">
        <meta property="og:image" content="/lib/img/stats.svg">

        <!-- SEO -->
        

        <!-- Force https -->
        <script type="text/javascript">
            var host = "truveris.github.io";
            if ((host == window.location.host) && (window.location.protocol != "https:"))
                window.location.protocol = "https";
        </script>
    </head>

    <body itemscope itemtype="http://schema.org/WebPage">
                <header class="header clearfix headroom headroom--top" id="header" role="banner">

            <a href="/">
                <span class="logo-dark-gray">truveris</span><span class="logo-light-gray">.github.io</span>
            </a>

            <a href="/jobs/" class="cta" role="link">
                We are hiring <span class="icon-right-open-mini"></span>
            </a>

        </header>

        






<article itemtype="http://schema.org/BlogPosting" itemscope class="main hentry entry" role="main">

    <!-- Article header -->
    <header>
        <figure>
            <img src="/lib/img/stats.svg" alt="Configuring a .pypirc File for Easier Python Packaging" class="roundimg">
        </figure>

        <h1 itemprop="name headline" role="heading">Configuring a .pypirc File for Easier Python Packaging</h1>
    </header>

    <!-- Article content -->
    <div itemprop="description articleBody" class="entry-content">
        

<p>
    PyPI is the Python Package Index. Its purpose is to help Python developers find and install software developed by the Python community.
    <br>
    <br>
    I recently built my first Python package, <a href="https://github.com/brodan/patter">patter</a>, and released it publicly via PyPI. I ran into a few hiccups along the way, so I am writing this post to help those in a similar position.
    <br>
    <br>
    This post will describe the basics of a .pypirc file and how to configure and secure it.
</p>

<h2 role="heading">Getting Started</h2>
<p>
    Before you proceed, it's a good idea to make sure that the <code>setuptools</code> and <code>wheel</code> libraries are up to date. The following command will update them if needed:
    <br>
    <br>
    <code>$ pip install -U setuptools wheel</code>
    <br>
    <br>
    This post will assume that you have a new Python library that is ready to be published. The source code should be packaged using a command like the one below. Your command may differ slightly depending on the needs of your package.
    <br>
    <br>
    <code>$ python setup.py sdist bdist_wheel</code>
    <br>
    <br>
    To read more about creating a distributable Python package, see <a href="https://packaging.python.org/tutorials/packaging-projects/#generating-distribution-archives">these</a> docs.
    <br>
    <br>
    In the next section, I use the <a href="https://github.com/pypa/twine">twine</a> utility to facilitate the release of my new package. You can read about the benefits of using <code>twine</code> over the built-in packaging tools <a href="https://github.com/pypa/twine#why-should-i-use-this">here</a>. Install <code>twine</code> using the following command:
    <br>
    <br>
    <code>$ pip install twine</code>
    <br>
    <br>
</p>

<h2 role="heading">The .pypirc File</h2>

<p>
  There are two main benefits to using a <code>.pypirc</code> file:
  <br>
  <br>
  1. It removes the need to enter a username/password when pushing to PyPI.
  <br>
  2. It simplifies command line usage when pushing packages to a non-default package repository (i.e. anywhere other than <a href="https://pypi.org/">pypi.org</a>).
  <br>
  <br>
  The official documentation on the <code>.pypirc</code> file can be found <a href="https://docs.python.org/3/distutils/packageindex.html#the-pypirc-file">here</a>.
  The contents of my <code>.pypirc</code> file can be seen below. This file must be placed in <code>$HOME/.pypirc</code> for pip/twine to use it.
  <pre><code class="language-raw">
    [distutils]
    index-servers=
        pypi
        testpypi

    [pypi]
    username: brodan
    password: xxxxxxxxxxxxxxxx

    [testpypi]
    repository: https://test.pypi.org/legacy/
    username: brodan
    password: yyyyyyyyyyyyyyyy
  </code></pre>
  <br>
  <br>
  Keep in mind, <a href="https://pypi.org/">pypi.org</a> and <a href="https://test.pypi.org/">test.pypi.org</a> are not integrated, so you'll need to have a separate account created on each site. 
  <br>
  <br>
  One thing to notice above is that the <code>[pypi]</code> section does not have <code>repository</code> configured, but the <code>testpypi</code> section does.
  That is because the <code>repository</code> variable defaults to <code>https://upload.pypi.org/legacy/</code>, so it does not need to be included in that section.
</p>

<h2 role="heading">Uploading Python Packages</h2>
<p>
  Once the file above is in place, the <code>--repository</code> flag can now be used with <code>twine</code> to specify which package repository your packages will be uploaded to:
  <br>
  <br>
  - If you wish to upload a package to the TestPyPI repository, the following command should be used:
  <br>
  <br>
      <code>twine upload --repository testpypi dist/*</code>
  <br>
  <br>
  - Similarly, once the package is ready to be released to the public, the following should be used: 
  <br>
  <br>
      <code>twine upload --repository pypi dist/*</code>
  <br>
  <br>
  Notice that you won't be prompted for a password when running either of the above commands. You also no longer need to copy and paste repository URLs into the terminal.
</p>

<h2 role="heading">Securing The .pypirc File</h2>

<p>
  Since the <code>.pypirc</code> file is storing sensitive information (i.e. passwords) in plain text, it's import to set the permissions on this file accordingly so that other users on the system can not access this file.
  <br>
  <br>
  To do this, run the following command:
  <br>
  <br>
  <code>chmod 600 ~/.pypirc</code>
  <br>
  <br>
  The command above will ensure that only the file owner (which should be your own user) can read and write to this file. Additional info on file permissions in UNIX can be found <a href="https://www.tutorialspoint.com/unix/unix-file-permission.htm">here</a>.
  Thank you to <a href="https://unix.stackexchange.com/a/20779">this StackOverflow answer</a> for help on this section.
</p>


<h2 role="heading">Wrapping Up</h2>

<p>
    With a .pypirc file in place, the process of pushing Python packages to public repositories is much easier.
    <br>
    <br>
    If you have any questions or feedback regarding this post, reach out to me via email: chranj@truveris.com
</p>

        <div class="large-separator" role="separator"></div>
    </div>

    <!-- Article footer -->
    <footer class="post-footer clearfix">

            <div class="post-social">
                <span class='st_twitter_hcount' displayText='Tweet' st_via="truveris"></span>
                <span class='st_linkedin_hcount' displayText='LinkedIn'></span>
            </div>

            <div class="byline vcard">
                <meta content="https://truveris.github.io//articles/configuring-pypirc/" itemprop="url">

                <a href="https://github.com/brodan">
                    <img src="/lib/img/helmet.svg" alt="Chris Hranj profil pic" class="profil_pic">
                </a>

                <span class="fn author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                    <a href="https://github.com/brodan" class="url"><span itemprop="name">Chris Hranj</span></a>
                </span>
                <br />
                <time datetime="2018-08-20T12:00:00" itemprop="datePublished" class="date published updated">August 20, 2018</time>
                <br />

                <span class="org">Truveris</span>
                <div class="adr">
                    <span class="locality">New York</span>
                    <span class="country-name">USA</span>
                </div>
            </div>

    </footer>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'truveris'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</article>

<p class="mobile-cta">
	<a href="/jobs/" class="cta" role="link">
		We are hiring <span class="icon-right-open-mini"></span>
	</a>
</p>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/lib/js/min/core-min.js"></script>
<script src="/lib/js/plugins/lightbox.js"></script>
<script>
    $(document).ready(function() {
        $('.image-link').magnificPopup({
            type: 'image',
            mainClass: 'mfp-with-zoom',
            closeOnContentClick: true,

            zoom: {
                enabled: true,
                duration: 300,
                easing: 'ease-in-out',
                opener: function(openerElement) {
                    return openerElement.is('img') ? openerElement : openerElement.find('img');
                }
            }
        });
    });
</script>


                <footer class="footer clearfix" role="contentinfo">

            <div class="wrap">

                <p class="social">
                    <a href="https://github.com/truveris/" data-tooltip="Github"><span class="icon-github"></span></a>
                    <a href="https://twitter.com/truveris" data-tooltip="Twitter"><span class="icon-twitter"></span></a>
                    <a href="https://www.linkedin.com/company/truveris" data-tooltip="Linkedin"><span class="icon-linkedin"></span></a>
                </p>

                <p class="copyright">
                    <span class="company" itemprop="copyrightHolder sourceOrganization">
						<a href="http://truveris.com" target="_blank"><img src="/lib/img/truveris-logo.png"/></a>
					</span> ⓒ
                    <span itemprop="copyrightYear">2015-2017</span>.
                    <span class="rightsreserved">All Rights Reserved.</span>
                </p>

            </div>
        </footer>

        <script src="/lib/js/min/core-min.js"></script>

        <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-31708065-8', 'auto');
      ga('send', 'pageview');
    </script>

    </body>

</html>





